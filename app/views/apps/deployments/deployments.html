<div id="deployments">


    <div>
        <div class="deploy_block">

            <div class="input-group col-sm-3 searchbar">
                <input type="text" class="form-control" placeholder="搜索服务名称" ng-keyup=search($event) ng-model="grid.txt">
                <!--ng-model="txt" ng-focus="showTip=true;" -->
                <span class="input-group-btn">
                        <span class="df_search uex-icon-search" ng-click="search('search')">
                        </span>
                    </span>
            </div>
            <div class="new_deploycol" style="" role="group" aria-label="">
                <div class="btn-group " role="group">
                    <a id="creatbtn" class="btn btn-green " ui-sref="console.service_create({namespace:namespace})">
                        <i class="fa fa-plus fa-lg"></i>
                        <span class=""> 新建部署</span>
                    </a>
                    <!--<button type="button" id="creat" class="btn dropdown-toggle ser_drp_set" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">-->
                        <!--<span class="caret"></span>-->
                        <!--<span class="sr-only">Toggle Dropdown</span>-->
                    <!--</button>-->
                    <!--&lt;!&ndash;<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">&ndash;&gt;-->
                    <!--&lt;!&ndash;Dropdown&ndash;&gt;-->
                    <!--&lt;!&ndash;<span class="caret"></span>&ndash;&gt;-->
                    <!--&lt;!&ndash;</button>&ndash;&gt;-->
                    <!--<ul class="dropdown-menu quick_menu">-->
                        <!--&lt;!&ndash;<li ui-sref="console.service_create" ><a href="#">新建服务</a></li>&ndash;&gt;-->
                        <!--<li class="quick_bs">-->
                            <!--<a ui-sref="console.quick_deploy({namespace:namespace})">快速部署</a>-->
                        <!--</li>-->
                    <!--</ul>-->

                </div>

                <!--&lt;!&ndash;<a class="btn build-jia" ng-click="reload()" style="display:inline-block;">&ndash;&gt;-->
                <!--&lt;!&ndash;&lt;!&ndash; height: 34px;width: 36px;padding: 5px 5px; jias 20161027 change&ndash;&gt;&ndash;&gt;-->
                <!--&lt;!&ndash;<i class="fa fa-refresh fa-lg"></i>&ndash;&gt;-->
                <!--&lt;!&ndash;</a>&ndash;&gt;-->
            </div>



        </div>
        <div class="clear"></div>
        <div class="table-responsive" style="margin-top: 20px;margin-left:20px;margin-right:20px;">
            <table class="table table-hover table-default df_table">
                <tr>
                    <th class="col-lg-3 col-md-2 col-sm-1">名称</th>
                    <th class="col-lg-2 col-md-2 col-sm-1">版本</th>
                    <th class="col-lg-3 col-md-2 col-sm-1">状态</th>
                    <th class="col-lg-2 col-md-2 col-sm-1">创建时间
                            <span class="sort_btn">
                                    <i class="uex-icon-to-back"></i>
                                </span>
                    </th>
                    <th class="col-lg-2 col-md-2 col-sm-1">触发器</th>
                </tr>
                <!--<tr ng-repeat="bc in items">-->
                <!--<tr ng-repeat="deployments in items">-->
                <tr ng-repeat="deployments in deploymentOneItem">
                    <td data-title="名称" style="white-space:nowrap;text-overflow:ellipsis;-o-text-overflow:ellipsis;overflow: hidden;display:block">

                        <a class="href-orange" ui-sref="console.deploymentconfig_detail({namespace:namespace,name: deployments.metadata.name})">{{deployments.metadata.name}}</a>

                    </td>
                    <td data-title="版本">
                        <a ng-if="deployments.status.latestVersion >0" class="last_deploy" ui-sref="console.rc({namespace:namespace,name:deployments.rc.metadata.name})">{{deployments.status.latestVersion}}</a>
                        <a ng-if="deployments.status.latestVersion ==0">No deployments</a>
                    </td>
                    <td data-title="状态">
                        <div row class="status" ng-if="deployments.status.latestVersion>0">
                            <status-icon status="deployments.rc | deploymentStatus" disable-animation></status-icon>
                            <span flex>
                                {{deployments.rc | deploymentStatus}}
                                <span ng-if="(deployments.rc | deploymentStatus) == 'Active' || (deployments.rc | deploymentStatus) == 'Running'">,
                                    <span ng-if="deployments.rc.spec.replicas !== deployments.rc.status.replicas">{{deployments.rc.status.replicas}}/</span> {{deployments.rc.spec.replicas}} replica
                                    <span
                                        ng-if="deployments.rc.spec.replicas != 1">s</span>
                            </span>
                            </span>
                        </div>
                    </td>
                    <td data-title="创建时间">
                        <span ng-if="deployments.status.latestVersion>0">
                            {{deployments.metadata.creationTimestamp | timescon}}
                        </span>
                    </td>
                    <td data-title="触发器">
                        <span ng-if="!deployments.status.details.causes.length && deployments.status.latestVersion>0">未知</span>
                        <span ng-if="deployments.status.details.causes.length && deployments.status.latestVersion>0">
                            <span ng-repeat="cause in deployments.status.details.causes">
                                <span ng-switch="cause.type">
                                    <span ng-switch-when="ImageChange">
                                        <span ng-if="cause.imageTrigger.from">
                                            <abbr title="{{cause.imageTrigger.from | imageObjectRef : null : true}}">镜像变化</abbr>
                                        </span>
                                    </span>
                                    <span ng-switch-when="ConfigChange">配置变化</span>
                                    <span ng-switch-default>{{cause.type}}</span>
                                </span>
                            </span>
                        </span>
                    </td>
                </tr>
                <tr>
                    <!-- <td data-title="Trigger">{{deployments.status.details.message}}</td> -->
                </tr>
                <!-- ng-if="items.length===0" -->
                <tr class="df_blank">
                        <td colspan="5" class="td_colspan_li" style="text-align: center;" ng-if="items.length===0">
                            <p class="blank_block">  <span class="blank_tit">{{text}}</span></p>
                        </td>
                    </tr>
            </table>
            <div class="text-center" ng-if="grid.total > 10" class="table_mar_top" style="">
                <uib-pagination class="pagination" ng-model="grid.page" total-items="grid.total" items-per-page="grid.size"
                    boundary-links="false" max-size="12" rotate="true" previous-text="<" next-text=">">
                </uib-pagination>

            </div>

        </div>
        <div class="clear"></div>
        <div class="table-responsive" style="margin-top: 20px;margin-left:20px;margin-right:20px;" ng-show="deploymentTwoItem.length>0">
            <table class="table table-hover table-default">
                <tr>
                    <th class="col-lg-3 col-md-2 col-sm-1">名称</th>
                    <th class="col-lg-2 col-md-2 col-sm-1">版本</th>
                    <th class="col-lg-3 col-md-2 col-sm-1">副本</th>
                    <th class="col-lg-2 col-md-2 col-sm-1">创建时间
                            <span class="sort_btn">
                                    <i class="uex-icon-to-back"></i>
                                </span>
                    </th>
                    <th class="col-lg-2 col-md-2 col-sm-1">触发器</th>
                </tr>
                <!--<tr ng-repeat="bc in items">-->
                <!--<tr ng-repeat="deployments in mydeploylist">-->
                <tr ng-repeat="deployment in deploymentTwoItem | orderObjectsByDate : true">
                    <td data-title="Name">
                        <a class="href-orange" ui-sref="console.deployment_detail({namespace:namespace,name: deployment.metadata.name})">{{deployment.metadata.name}}</a>

                    </td>
                    <td data-title="Last Version">
                        <span>
                            <a class="href-orange" ui-sref="console.rs({namespace:namespace,name:deployment.rs.metadata.name})" style="cursor: pointer;">{{deployment | lastDeploymentRevision}}</a>
                        </span>
                    </td>
                    <td data-title="Replicas">
                        <span>{{deployment.status.replicas}}/</span>{{deployment.spec.replicas}} replica
                        <span ng-if="deployment.spec.replicas != 1">s</span>
                    </td>
                    <td data-title="Created">
                        <span uib-tooltip="{{deployment.metadata.creationTimestamp  | timescon}}">
                            {{deployment.metadata.creationTimestamp | timescon}}
                        </span>
                    </td>
                    <td data-title="Strategy">
                        {{deployment.spec.strategy.type | sentenceCase}}
                    </td>
                </tr>
                <tr>
                    <!-- <td data-title="Trigger">{{deployments.status.details.message}}</td> -->
                </tr>
                <tr>
                    <td colspan="7" style="text-align: center;background: #fff;position:relative" ng-if="deploymentTwoItem.length===0">
                        <p class="blank_block">
                            <span class="blank_tit"> {{text}}</span>
                        </p>
                    </td>
                </tr>
            </table>

            <div class="text-center" ng-if="gridTwo.total > 10" class="table_mar_top" style="">
                <uib-pagination class="pagination" ng-model="gridTwo.page" total-items="gridTwo.total" items-per-page="gridTwo.size"
                    boundary-links="false" max-size="12" rotate="true" previous-text="<" next-text=">">
                </uib-pagination>

            </div>
        </div>
        <div class="clear"></div>
        <div class="table-responsive" style="margin-top: 20px;margin-left:20px;margin-right:20px;" ng-show="otherreplicasItem.length>0">
            <table class="table table-hover table-default">
                <tr>
                    <th class="col-lg-4 col-md-2 col-sm-1">名称</th>
                    <!--<th style="vertical-align: middle;padding-top:13px;padding-bottom:13px;">版本</th>-->
                    <th class="col-lg-4 col-md-2 col-sm-1">副本</th>
                    <th class="col-lg-4 col-md-2 col-sm-1">创建时间
                            <span class="sort_btn">
                                    <i class="uex-icon-to-back"></i>
                                </span>
                    </th>
                    <!--<th style="vertical-align: middle;padding-top:13px;padding-bottom:13px;">触发器</th>-->
                </tr>
                <!--<tr ng-repeat="bc in items">-->
                <!--<tr ng-repeat="deployments in mydeploylist">-->
                <tr ng-repeat="replicas in otherreplicasItem | orderObjectsByDate : true">
                    <td data-title="Name">
                        <a class="href-orange" ui-sref="console.rc({namespace:namespace,name: replicas.metadata.name})">{{replicas.metadata.name}}</a>

                    </td>
                    <!--<td data-title="Last Version">-->
                        <!--<span>-->
                            <!--<a class="href-orange" ui-sref="console.rs({namespace:namespace,name:deployment.rs.metadata.name})" style="cursor: pointer;">{{deployment | lastDeploymentRevision}}</a>-->
                        <!--</span>-->
                    <!--</td>-->
                    <td data-title="Replicas">
                        {{replicas.spec.replicas}} replica
                        <span ng-if="replicas.spec.replicas != 1">s</span>
                    </td>
                    <td data-title="Created">
                        <span uib-tooltip="{{replicas.metadata.creationTimestamp  | timescon}}">
                            {{replicas.metadata.creationTimestamp | timescon}}
                        </span>
                    </td>
                    <!--<td data-title="Strategy">-->
                        <!--{{deployment.spec.strategy.type | sentenceCase}}-->
                    <!--</td>-->
                </tr>
                <!--<tr>-->
                     <!--<td data-title="Trigger">{{deployments.status.details.message}}</td> -->
                <!--</tr>-->
                <!--<tr>-->
                    <!--<td colspan="7" style="text-align: center;background: #fff;position:relative" ng-if="deploymentTwoItem.length===0">-->
                        <!--<p class="blank_block">-->
                            <!--<span class="blank_tit"> {{text}}</span>-->
                        <!--</p>-->
                    <!--</td>-->
                <!--</tr>-->
            </table>

            <div class="text-center" ng-if="gridThree.total > 10" class="table_mar_top" style="">
                <uib-pagination class="pagination" ng-model="gridThree.page" total-items="gridThree.total" items-per-page="gridThree.size"
                    boundary-links="false" max-size="12" rotate="true" previous-text="<" next-text=">">
                </uib-pagination>

            </div>
        </div>
        <div class="clear"></div>
        <div class="table-responsive" style="margin-top: 20px;margin-left:20px;margin-right:20px;" ng-show="otherreplicasetsItem.length>0">
            <table class="table table-hover table-default">
                <tr>
                    <th class="col-lg-4 col-md-2 col-sm-1">名称</th>
                    <!--<th style="vertical-align: middle;padding-top:13px;padding-bottom:13px;">版本</th>-->
                    <th class="col-lg-4 col-md-2 col-sm-1">副本</th>
                    <th class="col-lg-4 col-md-2 col-sm-1">创建时间
                            <span class="sort_btn">
                                    <i class="uex-icon-to-back"></i>
                                </span>
                    </th>
                    <!--<th style="vertical-align: middle;padding-top:13px;padding-bottom:13px;">触发器</th>-->
                </tr>
                <!--<tr ng-repeat="bc in items">-->
                <!--<tr ng-repeat="deployments in mydeploylist">-->
                <tr ng-repeat="replicaset in otherreplicasetsItem | orderObjectsByDate : true">
                    <td data-title="Name">
                        <a class="href-orange" ui-sref="console.rs({namespace:namespace,name: replicaset.metadata.name})">{{replicaset.metadata.name}}</a>

                    </td>
                    <!--<td data-title="Last Version">-->
                        <!--<span>-->
                            <!--<a class="href-orange" ui-sref="console.rs({namespace:namespace,name:deployment.rs.metadata.name})" style="cursor: pointer;">{{deployment | lastDeploymentRevision}}</a>-->
                        <!--</span>-->
                    <!--</td>-->
                    <td data-title="Replicas">
                        {{replicaset.spec.replicas}} replica
                        <span ng-if="replicaset.spec.replicas != 1">s</span>
                    </td>
                    <td data-title="Created">
                        <span uib-tooltip="{{replicaset.metadata.creationTimestamp  | timescon}}">
                            {{replicaset.metadata.creationTimestamp | timescon}}
                        </span>
                    </td>
                    <!--<td data-title="Strategy">-->
                        <!--{{deployment.spec.strategy.type | sentenceCase}}-->
                    <!--</td>-->
                </tr>
                <!--<tr>-->
                     <!--<td data-title="Trigger">{{deployments.status.details.message}}</td> -->
                <!--</tr>-->
                <!--<tr>-->
                    <!--<td colspan="7" style="text-align: center;background: #fff;position:relative" ng-if="deploymentTwoItem.length===0">-->
                        <!--<p class="blank_block">-->
                            <!--<span class="blank_tit"> {{text}}</span>-->
                        <!--</p>-->
                    <!--</td>-->
                <!--</tr>-->
            </table>

            <div class="text-center" ng-if="gridThree.total > 10" class="table_mar_top" style="">
                <uib-pagination class="pagination" ng-model="gridThree.page" total-items="gridThree.total" items-per-page="gridThree.size"
                    boundary-links="false" max-size="12" rotate="true" previous-text="<" next-text=">">
                </uib-pagination>

            </div>
        </div>
    </div>


</div>
<style>
    #creat:focus {
        color: #ffffff;
    }

    #creatbtn:hover {
        z-index: 0;
    }

    .clear {
        clear: both;
        overflow: hidden;
    }

    .deploy_block {
        padding-top: 6px;
        padding-bottom: 10px;
        box-shadow: 0 1px 0 0 rgba(224, 230, 237, 0.50);
        clear: both;
        height: 42px;
        padding-left: 20px;
        padding-right: 20px;background:#fff;
    }

    .new_deploycol {
        float: right;margin-top:4px;
    }
    .new_deploycol a{font-size:12px;height:26px;line-height:26px;margin:0;padding:0px 10px;}
    .new_deploycol a :hover {
        color: #fff;
    }

    .nodeploy :hover {
        color: #0b0000;

    }

    .last_deploy {
        color: #47B2FB;
        cursor: pointer;
    }

    .last_deploy:hover {
        color: #98D4FD;
    }
    .new_deploycol #creat{height:26px;}
    .new_deploycol .caret{margin-top:-6px;}
   
</style>