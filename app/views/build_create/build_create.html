<div class="buildcreat df_frame" id="newbuildcreat">
    <div>
        <form class="form-horizontal" name="frm">
            <div>
                <div class="panel panel-default build-jia-default" style="margin-bottom: 0;">
                    <div class="panel-heading panel-jia-heading ">
                        <span class="panel-title panel-jia-title">新建构建</span>
                    </div>
                    <div class="panel-body panel-block-jia-body">
                        <div class="form-group form-jia-line build-creat-top">
                            <label class="col-sm-2 control-label text-left creat-name-lablel">构建名称</label>
                            <div class="col-sm-10 pr40">
                                <input ng-model="buildConfig.metadata.name"
                                       ng-blur="nameblur()"
                                       onkeypress="if((event.keyCode > 31 && event.keyCode < 44) || (event.keyCode > 46 && event.keyCode < 48) || (event.keyCode > 57 && event.keyCode < 65) || (event.keyCode > 90 && event.keyCode < 97))event.returnValue = false;"
                                       ng-focus="namefocus()"
                                       type="text" name="name" class="form-control creat-name-input"
                                       required
                                       placeholder="例如：datafoundry">
                                <small ng-if="namerr.nil" class="fa fa-info-circle err-tip">请输入正确构建名称
                                </small>
                                <small ng-if="namerr.rexed" class="fa fa-info-circle err-tip">
                                    请输入4~30位名称,名称只能包含小写英文、数字以及“-”(不能以数字开头)
                                </small>
                                <small ng-if="namerr.repeated" class="fa fa-info-circle err-tip">输入的名称已重复
                                </small>
                            </div>
                        </div>
                        <div class="form-group form-jia-line build-creat-center">
                            <label class="col-sm-2 control-label creat-tab-lablel">代码URL</label>
                            <div class="col-sm-10 bc creat-tab" id="bc">
                                <uib-tabset class="tab-default tab-jia-default" active="buildcheck">
                                    <!--gitlab-->
                                    <uib-tab index="1" heading="GitLab">
                                        <div class="tabinfo tab-lab">
                                            <a class="btn pull-right tab-lab-reload" ng-class="{'running':labrunning}"
                                               uib-tooltip="同步代码源"
                                               ng-click="loadOwner('gitlab')">
                                                <i class="fa fa-green fa-lg fa-refresh"></i>
                                            </a>
                                            <img class="tab-lab-img"
                                                 src="views/build_create/img/images02_178.png">
                                            <p class="tab-lab-text">DataFoundry 提供的代码仓库（<a href="https://code.dataos.io"
                                                                                           target="view_window"
                                                                                           class="view-jia-tit">https://code.dataos.io</a>）是可靠的自托管的
                                                Git 项目仓库，
                                                可通过Web 界面进行访问公开的或者私人项目。</p>
                                            <p><a class="view_tit_set" ng-show="needbind.gitlab"
                                                  ng-click="bindhub('gitlab')">绑定Gitlab</a></p>
                                        </div>
                                    </uib-tab>
                                    <!--github-->
                                    <uib-tab index="2" heading="GitHub">
                                        <!--<uib-tab index="2" heading="GitHub" ng-click="checkdTab(2)">-->
                                        <div class="tabinfo tab-lab">
                                            <a class="btn pull-right tab-lab-reload"
                                               uib-tooltip="同步代码源"
                                               ng-click="loadOwner('github')">
                                                <i class="fa fa-green fa-lg fa-refresh"></i>
                                            </a>
                                            <img class="tab-lab-img"
                                                 src="views/build_create/img/github.png">
                                            <p class="tab-lab-text">Github 于 2008 年上线，目前，除了 Git 代码仓库托管以及基本的 Web 管理界面以外 、
                                                还提供了订阅 、讨论组 、文本渲染 、
                                                在线文件编辑器 、协作图谱（报表） 、代码片段分享（Gist）等功能。</p>
                                            <p><a class="view_tit_set" ng-show="needbind.github"
                                                  ng-click="bindhub('github')">绑定Github</a></p>
                                        </div>

                                    </uib-tab>

                                    <uib-tab index="3" heading="Git仓库" style="font-size: 12px;">
                                        <from>
                                            <p style="margin-left: -15px;font-size: 12px;">
                                                <label>
                                                    <input type="radio" name="CodeBase" value=1
                                                           ng-model="grid.CodeBase" ng-checked=1 required>
                                                </label>
                                                <span>公有代码库</span>
                                                <label>
                                                    <input type="radio" name="CodeBase" value=2
                                                           ng-model="grid.CodeBase">
                                                </label>
                                                <span>私有代码库</span>
                                            </p>
                                            <div ng-show="grid.CodeBase==1">
                                                <div class="form-group">
                                                    <label for="address"
                                                           class="control-label require tab-reg-label label-font">仓库地址</label>
                                                    <div>
                                                        <input type="text"
                                                               class="form-control tab-reg-input form-control-input-line"
                                                               ng-model="buildConfig.spec.source.git.uri">
                                                        <small ng-show="privateErr.urlerr" class="fa fa-info-circle err-tip">
                                                            请输入正确仓库地址
                                                        </small>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label for="ref" class="control-label tab-reg-label label-font">分支/Tag/Commit</label>
                                                    <div>
                                                        <input type="text" placeholder=""
                                                               class="form-control tab-reg-input form-control-input-line"
                                                               ng-model="buildConfig.spec.source.git.ref">
                                                    </div>
                                                </div>
                                                <div class="form-group tab-reg-div">
                                                    <label for="dockeraddress"
                                                           class="control-label tab-reg-label label-font">Dockerfile路径</label>
                                                    <div class="">
                                                        <input type="text" placeholder=""
                                                               class="form-control tab-reg-input form-control-input-line"
                                                               ng-model="buildConfig.spec.source.contextDir">
                                                    </div>
                                                </div>
                                                <span style="color: red;">公有代码库公有代码库公有代码库</span>
                                            </div>
                                            <div ng-show="grid.CodeBase==2">
                                                <div class="form-group">
                                                    <label for="address"
                                                           class="control-label tab-reg-label require label-font">仓库地址</label>
                                                    <div>
                                                        <input type="text"
                                                               class="form-control tab-reg-input form-control-input-line"
                                                               id="address"
                                                               ng-model="buildConfig.spec.source.git.uri" required>
                                                        <small ng-show="privateErr.urlerr" class="fa fa-info-circle err-tip">
                                                            请输入正确仓库地址
                                                        </small>
                                                    </div>
                                                </div>
                                                <div class="form-group tab-reg-div">
                                                    <label for="susername" class="control-label require tab-reg-label label-font">用户名</label>
                                                    <div class="">
                                                        <input type="text"
                                                               class="form-control tab-reg-input form-control-input-line"
                                                               id="susername"
                                                               ng-model="sername.name">
                                                        <small ng-show="privateErr.usernameerr" class="fa fa-info-circle err-tip">
                                                            请输入正确用户名
                                                        </small>
                                                    </div>
                                                </div>
                                                <div class="form-group tab-reg-div">
                                                    <label for="spwd"
                                                           class="control-label text-left require tab-reg-label label-font">口令</label>
                                                    <div class="">
                                                        <input type="password"
                                                               class="form-control tab-reg-input form-control-input-line"
                                                               id="spwd"
                                                               ng-model="sername.pwd">
                                                        <small ng-show="privateErr.pwderr" class="fa fa-info-circle err-tip">
                                                            请输入正确口令
                                                        </small>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label for="ref" class="control-label tab-reg-label label-font">分支/Tag/Commit</label>
                                                    <div>
                                                        <input type="text" placeholder=""
                                                               class="form-control tab-reg-input form-control-input-line"
                                                               id="ref"
                                                               ng-model="buildConfig.spec.source.git.ref">
                                                    </div>
                                                </div>
                                                <div class="form-group tab-reg-div">
                                                    <label for="dockeraddress"
                                                           class="control-label tab-reg-label label-font">Dockerfile路径</label>
                                                    <div class="">
                                                        <input type="text" placeholder=""
                                                               class="form-control tab-reg-input form-control-input-line"
                                                               id="dockeraddress"
                                                               ng-model="buildConfig.spec.source.contextDir">
                                                    </div>
                                                </div>
                                            </div>
                                        </from>
                                    </uib-tab>
                                </uib-tabset>
                                <div class="is-box creat-box" ng-hide=buildcheck==3>
                                    <div class="panel panel-default first col-md-4 box-div" ng-show="buildcheck==1">
                                        <div class="panel-heading">
                                            <img src="views/build_create/img/user.png">
                                            用户/组织
                                        </div>
                                        <div class="panel-body">
                                            <ul>
                                                <li class="labcon" ng-repeat="org in gitload.gitlab">
                                                    <a href="javascript:;" uib-tooltip="{{org.namespace}}"
                                                       ng-class="{'active': grid.org == $index}"
                                                       ng-click="selectorg($index,org)">
                                                        <i class="faa faa-check"></i>&nbsp;&nbsp;{{org.namespace}}
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="panel panel-default first col-md-4 box-div" ng-show="buildcheck==2">
                                        <div class="panel-heading">
                                            <img src="views/build_create/img/user.png">
                                            用户/组织
                                        </div>
                                        <div class="panel-body">
                                            <ul>
                                                <li class="labcon" ng-repeat="org in gitload.github">
                                                    <a href="javascript:;" uib-tooltip="{{org.namespace}}"
                                                       ng-class="{'active': grid.org == $index}"
                                                       ng-click="selectorg($index,org)">
                                                        <i class="faa faa-check"></i>&nbsp;&nbsp;{{org.namespace}}
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="panel panel-default col-md-4 box-div">
                                        <div class="panel-heading">
                                            <img src="views/build_create/img/project.png">
                                            项目
                                        </div>
                                        <div class="panel-body">

                                            <ul style="">
                                                <li class="labcon" ng-repeat="repo in gitdata.repos">
                                                    <a href="javascript:;" uib-tooltip="{{repo.name}}"
                                                       ng-class="{'active': grid.repo == $index}"
                                                       ng-click="selectrepo($index,repo)">
                                                        <i class="faa faa-check"></i>&nbsp;&nbsp;{{repo.name}}
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="panel panel-default third col-md-4">
                                        <div class="panel-heading">
                                            <img src="views/build_create/img/branch.png">
                                            代码分支
                                        </div>
                                        <div class="panel-body">
                                            <ul>
                                                <li class="labcon" ng-repeat="branch in gitdata.branchs">
                                                    <a href="javascript:;" uib-tooltip="{{branch.name}}"
                                                       ng-class="{'active': grid.branch == $index}"
                                                       ng-click="selectbranch($index,branch)">
                                                        <i class="faa faa-check"></i>&nbsp;&nbsp;{{branch.name}}
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>

                    </div>
                    <a class="btn"
                       ng-class="{'btn-orange':true}"
                       ng-click="create()"
                       style="margin-left:52px;margin-right:52px;width:auto;border-radius:4px;">开始构建</a>
                </div>
            </div>
        </form>
    </div>
</div>


