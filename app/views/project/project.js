'use strict';angular.module('console.project', [{    files: [        'components/searchbar/searchbar.js',        'views/project/project.css'    ]}])    .controller('ProjectCtrl', ['$rootScope', '$scope', '$log', '$state', '$stateParams', 'GLOBAL', 'Sort', 'Ws','AddProject','projectlist','Toast',        function ($rootScope, $scope, $log, $state, $stateParams,  GLOBAL,  Sort, Ws,AddProject,projectlist,Toast) {            //分页            $scope.grid = {                page: 1,                size: GLOBAL.size,                txt: ''            };            $scope.data=angular.copy(projectlist.items);            var refresh = function (page) {                $(document.body).animate({                    scrollTop: 0                }, 200);                var skip = (page - 1) * $scope.grid.size;                $scope.items = $scope.data.slice(skip, skip + $scope.grid.size);            };            //console.log('projectlist', projectlist);            function reproject(){                angular.forEach($scope.data, function (item, i) {                    $scope.data[i].sortname = item.metadata.annotations['openshift.io/display-name'] || item.metadata.name;                })                $scope.data.sort(function (x, y) {                    return x.sortname > y.sortname ? 1 : -1;                });                console.log('$scope.data.length', $scope.data.length);                $scope.grid.total = $scope.data.length;                refresh(1)            }            reproject()            $scope.$watch('grid.page', function (newVal, oldVal) {                if (newVal != oldVal) {                    refresh(newVal);                }            });            $scope.text = '您还没有project';            //创建project            $scope.createProject = function() {                AddProject.open('创建组织', '组织名称', '', '', 'org').then(function(res) {                    Toast.open('创建成功')                    $timeout(function() {                        //loadProject()                    }, 2000)                })            }            $scope.$on('$destroy', function () {                Ws.clear();            });        }]);