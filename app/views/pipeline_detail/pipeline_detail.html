<div id="pipeline-detail" class="pipeline-detail df_frame" style="color: #475669; font-size: 12px;">
    <div>
        <div class="panel-default">
            <div class="module-heading">
                <div class="module_block_l">
                    <div class="img-block">
                        <svg class="icon svg_img" viewBox="0 0 64 64"><path d="M32.07,0a32,32,0,1,0,32,32A32,32,0,0,0,32.07,0Zm-10,39.17A2.28,2.28,0,0,1,22,42.41a2.25,2.25,0,0,1-1.71.71,2.35,2.35,0,0,1-1.71-.71s-9.81-9.52-9.66-9.52A2.35,2.35,0,0,1,8.18,31,2.48,2.48,0,0,1,9,29.33l9.81-8.1A2.42,2.42,0,1,1,22,24.93l-7.67,6.54ZM39.16,24.36,29.21,42a2.64,2.64,0,0,1-2.13,1.28A2.68,2.68,0,0,1,25.95,43a2.36,2.36,0,0,1-.85-3.27L35,22.09a2.36,2.36,0,0,1,3.27-.85A2.14,2.14,0,0,1,39.16,24.36Zm6.25,18.19a3,3,0,0,1-1.71.71A2.35,2.35,0,0,1,42,42.55a2.59,2.59,0,0,1,0-3.41l7.82-7.67-7.67-6.54a2.42,2.42,0,0,1,3.13-3.7l9.81,8.1A2,2,0,0,1,55.93,31a2,2,0,0,1-.71,2Z"/></svg>
                    </div>
                    <div class="img-detail">
                        <p class="img-tit">{{BuildConfig.metadata.name}}</p>
                        <p class="img-time">
                            <span classs="module_tit">创建时间：</span><span class="module_time">{{BuildConfig.metadata.creationTimestamp | dateRelative}}</span>
                        </p>
                    </div>

                </div>
                <div class="module_block_r">
                    <a class="btn btn-gray pull-right btn_a df_del" style="" ng-click="deletes()">
                        <!-- <i class="fa fa-trash-o fa-lg"></i> -->
                        <span class="df_close"><i class="uex-icon-delete"></i></span>
                    </a>
                    <a class="btn btn-green pull-right df_build" ng-click="startBuild()"> 部署</a>
                </div>
            </div>
            <!--<div class="panel-heading">-->
                <!--<span class="panel-title">-->
                    <!--<span class="icon25 icon25-panel"></span>&nbsp;&nbsp; {{BuildConfig.metadata.name}}-->
                <!--</span>-->
                <!--<a class="btn btn-gray pull-right btn_a" style="" ng-click="deletes()">-->
                    <!--<i class="fa fa-trash-o fa-lg"></i>-->
                <!--</a>-->
                <!--<a class="btn btn-green pull-right" ng-click="startBuild()">部署</a>-->
            <!--</div>-->
            <!--<div class="panel-body">-->
                <!--<div class="row">-->
                    <!--<div class="col-sm-4">-->
                        <!--<div class="media media-sm">-->
                            <!--<div class="media-left">-->
                                <!--<img class="media-object" src="views/build_detail/img/images_104.png">-->
                            <!--</div>-->
                            <!--<div class="media-body">-->
                                <!--<h4 class="media-heading">创建时间</h4>-->
                                <!--<small class="small_col">{{BuildConfig.metadata.creationTimestamp | dateRelative}}-->
                                <!--</small>-->
                            <!--</div>-->
                        <!--</div>-->
                    <!--</div>-->
                <!--</div>-->
            <!--</div>-->
        </div>

        <uib-tabset class="tab-default tab-jia-default" active="active">
            <uib-tab index="1">
                <uib-tab-heading>
                    历史版本
                </uib-tab-heading>
                <div class="timeline">
                    <ul>
                        <li ng-repeat="item in databuild.items">
                            <label>
                                <span class="dot"></span>
                            </label>

                            <div class="container-fluid">
                                <div class="row">
                                    <div class="col-sm-4">
                                        版本：
                                        <a class="ver_tit"
                                           ui-sref="console.pipelinetag_detail({namespace:namespace,name:item.status.config.name,tag:item.metadata.annotations['openshift.io/build.number']})">
                                            #{{item.metadata.annotations['openshift.io/build.number']}}</a>
                                    </div>
                                    <div class="col-sm-6">
                                        <span>状态：{{item.status.phase | piplineStatusFilter}}</span>
                                    </div>
                                    <div class="col-sm-2 text-right">
                                        <!-- <a ng-if="item.status.phase == 'Pending' || item.status.phase == 'Running' || item.status.phase == 'New'" ng-click="stop($index)"
                                            class="icon25 icon25-stop" uib-tooltip="终止" href="javascript:;"></a> -->
                                        <a class="icon25 icon25-collapse" uib-tooltip="查看状态"
                                           ng-click="getLog($index,item)" href="javascript:;"></a>
                                    </div>
                                </div>
                            </div>
                            <div style="height: 100px;" uib-collapse="!item.showLog">

                                <div class="pipline_log">

                                    <div class="pipl_block load" ng-repeat="stage in item.stages">
                                        <div class="pip_b_l"
                                             ng-class="{'SUCCESS_set':stage.status=='SUCCESS','FAILED_set':stage.status=='FAILED','PRO_set':stage.status=='IN_PROGRESS'}">
                                            <span class="file_name">{{stage.name}}</span>
                                            <div class="pipl_block_set load_{{stage.status}}">
                                                <div class="fa_set">
                                                    <i class="fa fa_block_set"></i>
                                                </div>
                                            </div>
                                            <span class="sec">{{stage.durationMillis | Millistime}}</span>
                                        </div>
                                        <div class="arrow_btn">
                                            <i class="fa fa-arrow-right"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </li>
                        <div class="border_background" style="" ng-if="databuild.items.length===0" class="ng-scope">
                            <p>
                                <span class="blank_tit" style="font-size: 12px;">您还没有构建记录</span>
                            </p>
                        </div>
                    </ul>
                </div>
                <!--<c-timeline name="bcName" type="build"></c-timeline>-->
            </uib-tab>
            <uib-tab index="2">
                <uib-tab-heading>
                    <!--<span class="icon20 icon20-paper"></span> -->
                    配置信息
                </uib-tab-heading>
                <div class="resource-details">
                    <h3 class="tit_details df_tit">详细信息
                        <a class="btn df_build_btn pull-right" style="float: right" ng-click="saveBuild()">保存</a></h3>
                    <dl class="dl_list">
                        <dt class="pz_l">Build Strategy:</dt>
                        <dd>{{BuildConfig.spec.strategy.type}}</dd>
                    </dl>

                    <dl class="dl_list">
                        <dt class="pz_l">Run Policy:</dt>
                        <dd>{{BuildConfig.spec.runPolicy}}</dd>
                    </dl>

                    <dl class="dl_list">
                        <dt style="margin-bottom:4px;font-weight:normal">Jenkinsfile</dt>
                        <dd>
                            <div style="height:280px; border: 1px solid #d1d1d1;background:#fafafa" ui-ace="{
                                    mode: 'groovy',
                                    theme: 'eclipse',
                                    showGutter: false,
                                    rendererOptions: {
                                      fadeFoldWidgets: true,
                                      highlightActiveLine: false,
                                      showPrintMargin: false
                                    },
                                    advanced: {
                                      highlightActiveLine: false
                                    }
                                  }" ng-model="BuildConfig.spec.strategy.jenkinsPipelineStrategy.jenkinsfile"
                                 class="ace-bordered ace-inline ace-read-only"></div>
                        </dd>
                    </dl>
                </div>


                <h3 class="tit_details trig_tp df_tit">Triggers</h3>
                <div ng-repeat="trigger in BuildConfig.spec.triggers | orderBy : 'type' : false : compareTriggers">
                    <div ng-switch="trigger.type">
                        <div ng-switch-when="Generic">
                            <div class="pip_block">
                                <p class="pit_left">Generic 网络URL:</p>
                                <span class="pip_tit">
                                    {{BuildConfig.metadata.name | webhookURL : trigger.type : trigger.generic.secret : projectname}}
                                </span>
                                <i class="pip_btn uex-icon-copy" uib-tooltip="复制" ng-class="{'iscopyactive':isCopy}"
                                   ng-click="gcopy($event)"></i>
                            </div>

                        </div>

                        <div ng-switch-when="GitHub">
                            <div class="pip_block">
                                <p class="pit_left">GitHub 网络URL:</p>
                                <span class="pip_tit">
                                    {{BuildConfig.metadata.name | webhookURL : trigger.type : trigger.github.secret : projectname}}
                                </span>
                                <i class="pip_btn uex-icon-copy" uib-tooltip="复制" ng-class="{'iscopyactive':isCopy}"
                                   ng-click="gcopy($event)"></i>
                            </div>
                        </div>
                    </div>
                </div>
                <div>

                    <div class="pip_block">
                        <p class="pit_left">Manual (CLI):</p>
                        <span class="pip_tit">
                            oc start-build {{BuildConfig.metadata.name}} -n {{projectname}}
                        </span>
                        <i class="pip_btn uex-icon-copy" uib-tooltip="复制" ng-class="{'iscopyactive':isCopy}"
                           ng-click="gcopy($event)"></i>
                    </div>

                </div>

            </uib-tab>
        </uib-tabset>

    </div>
</div>